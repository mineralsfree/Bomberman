{"version":3,"sources":["Components/Field/Field.jsx","index.js","Components/Field/default_position.js","App.js"],"names":["Field","props","pos","position","enemy","arr","i","field","length","j","content","x","y","bomb","bombSocket","socket","send","JSON","stringify","push","react_default","a","createElement","className","join","default_position","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","update","forceUpdate","escFunction","bind","assertThisInitialized","enemyPos","delta","name","registred","WebSocket","died","event","_this2","obj","keyCode","socketRequest","time","Date","getTime","inf","console","log","_this3","onmessage","_ref","data","parse","hasOwnProperty","document","addEventListener","removeEventListener","value","Field_Field","callback","Component","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.576e9841.chunk.js","sourcesContent":["import React from 'react'\nimport './Field.css'\nexport default function Field(props) {\n // console.log(props);\n  let pos = props.position;\n  let enemy = props.enemy;\n    let arr = [];\n    for (let i = 0; i < props.field.length; i++) {\n        for (let j = 0; j < props.field[i].length; j++) {\n            let content;\n            switch (props.field[i][j]) {\n                case 1:\n                    content = 'occupied';\n                    break;\n                case 3:\n                    content = 'bomb';\n                    break;\n                case 5:\n                    content = 'hor_fire';\n                    break;\n                default:\n                    content = 'empty';\n            }\n          if ((i === pos.x && j === pos.y) ) {\n            content = 'player';\n                if (props.bomb) {\n                    props.field[i][j] = 3;\n                    content += ' bomb';\n                    let bombSocket = {bomb: pos};\n                    props.socket.send(JSON.stringify(bombSocket));\n                }\n            }\n         if (enemy && i === enemy.x && j === enemy.y){\n           content = 'player';\n         }\n            arr.push(<div className={[content, 'block'].join(\" \")}/>);\n        }\n    }\n    return (\n        <div className={'container'}>{arr}</div>\n    );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nfor (let i = 0; i <10; i++) {\n    ReactDOM.render(<App />, document.getElementById('root'));\n}\n","let default_position = {x:3,y:3};\nexport default default_position","import React, {Component} from 'react';\nimport './App.css';\nimport Field from './Components/Field/Field'\nimport pos from './Components/Field/default_position'\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.escFunction = this.escFunction.bind(this);\n        this.update = this.update.bind(this);\n        this.position = pos;\n        this.enemyPos = {};\n        this.delta = {x: 0, y: 0};\n        this.field = [];\n        this.name='';\n        this.registred = false;\n        this.bomb = false;\n        this.socket = new WebSocket('ws://46.101.164.131:5000/');\n        this.died = false\n    }\n\n    escFunction(event) {\n      if (!this.registred){\n        let name = 'Nikita';\n        let obj = {};\n        obj.registration = 1;\n        obj.name = name;\n        this.socket.send(JSON.stringify(obj));\n        this.registred = true;\n      }\n      this.delta = {x: 0, y: 0};\n        switch (event.keyCode) {\n            case 39:\n                this.delta = {x: 0, y: 1};\n                break;\n            case 38:\n                this.delta = {x: -1, y: 0};\n                break;\n            case 37:\n                this.delta = {x: 0, y: -1};\n                break;\n            case 40:\n                this.delta = {x: 1, y: 0};\n                break;\n            case 32:\n                this.bomb= true;\n                break;\n          default: return;\n        }\n        let socketRequest = {\n          delta: this.delta,\n          position: this.position,\n          name: this.name,\n          time: new Date().getTime()\n        };\n        let inf = JSON.stringify(socketRequest);\n      console.log(socketRequest);\n      this.socket.send(inf);\n        this.forceUpdate(()=> this.bomb = false);\n        this.delta = {x: 0, y: 0};\n    }\n    update = function() {\n        this.forceUpdate();\n    };\n    componentDidMount() {\n      //this.socket.onopen = () => this.socket.send(JSON.stringify({type: 'greet', payload: 'F2AgataF'}));\n      this.socket.onmessage = ({data}) => {\n        let obj  = JSON.parse(data);\n        console.log(obj);\n        if(obj.hasOwnProperty('pos')){\n          this.position = obj.pos;\n        }\n        if(obj.hasOwnProperty('enemyPos')){\n          this.enemyPos = obj.enemyPos;\n        } else {\n          this.enemyPos = {};\n        }\n        if(obj.hasOwnProperty('died')){\n          this.died = true;\n        }\n        this.field = obj.field;\n        this.forceUpdate();\n      };\n        document.addEventListener(\"keydown\", this.escFunction, false);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(\"keydown\", this.escFunction, false);\n    }\n\n    render() {\n        const {value} = this.props;\n        if (!this.died){\n          return (\n            <div className=\"App\">\n              <Field\n                position={this.position}\n                field={this.field}\n                delta={this.delta}\n                bomb = {this.bomb}\n                callback = {this.update}\n                socket = {this.socket}\n                enemy = {this.enemyPos}\n              />\n\n            </div>\n          );\n        } else return(\n          <div className={'died'}>F! You died - F5 to try enter game room</div>\n        )\n\n    }\n}\n\nexport default App;\n"],"sourceRoot":""}